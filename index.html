<!DOCTYPE html>
<html lang="en">
  <head>
    <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.4/dist/JsBarcode.all.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/js-cookie@rc/dist/js.cookie.min.js"></script>
    <script>
      try {
        window.addEventListener('DOMContentLoaded', (event) => {
          const input = document.getElementById('number')
          const barcodeContainer = document.getElementById('barcode-container')
          const barcode = document.getElementById('barcode')
          
          input.value = Cookies.get('lastValue')

          input.addEventListener('input', (event) => {
            Cookies.set('lastValue', input.value)
            
            if(input.value == "") barcodeContainer.classList.add('hidden')
            
            JsBarcode('#barcode', input.value, {
              format: "CODE128",
              lineColor: "#000",
              width: 3,
              height: 100,
              displayValue: false
            })
            
            barcodeContainer.classList.remove('hidden')
          })
          
          const inputEvent = new Event('input')
          input.dispatchEvent(inputEvent)
        })
      } catch (error) {
        console.log(error)
      }
    </script>
    <style>
      body {
        background: lightyellow;
        text-align: center;
      }
      .hidden {
        display: none;
      }
    </style>
  </head>
  <body>
    <label for="number">Card Number: </label>
    <input type="number" id="number" />
    <br><br><br>
    <div id="barcode-container" class="hidden">
      <img id="barcode"/>
    </div>
  </body>
</html>
